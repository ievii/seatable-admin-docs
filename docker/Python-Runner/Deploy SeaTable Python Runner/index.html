<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Official SeaTable Admin Manual.
"><meta name=author content="SeaTable GmbH"><link href=https://admin.seatable.io/docker/Python-Runner/Deploy%20SeaTable%20Python%20Runner/ rel=canonical><link href=../../Enterprise-Edition/Deploy%20SeaTable-EE%20with%20Docker/ rel=prev><link href=../Update%20SeaTable%20Python%20Runner/ rel=next><link rel=icon href=../../../media/seatable-favicon.ico><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.5.2"><title>Deploy - SeaTable Admin Manual</title><link rel=stylesheet href=../../../assets/stylesheets/main.50c56a3b.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script>
    var site_id = "3";
    var provider_url = "https://wp-stats.seatable.io/";
    
    /* Wait for page to load and application to mount */
    document.addEventListener("DOMContentLoaded", function() {
      var _paq = window._paq = window._paq || [];
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
          _paq.push(['setTrackerUrl', provider_url+'matomo.php']);
          _paq.push(['setSiteId', site_id]);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src=provider_url+'matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    })
  </script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#deploy-seatable-python-runner class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="SeaTable Admin Manual" class="md-header__button md-logo" aria-label="SeaTable Admin Manual" data-md-component=logo> <img src=../../../media/SeaTable256-256.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> SeaTable Admin Manual </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Deploy </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/seatable/seatable-admin-docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> seatable/seatable-admin-docs </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Introduction </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../../../installation/ class=md-tabs__link> Installation </a> </li> <li class=md-tabs__item> <a href=../../../config/ class=md-tabs__link> Configuration </a> </li> <li class=md-tabs__item> <a href=../../../maintain/ class=md-tabs__link> Maintenance/Upgrade </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="SeaTable Admin Manual" class="md-nav__button md-logo" aria-label="SeaTable Admin Manual" data-md-component=logo> <img src=../../../media/SeaTable256-256.png alt=logo> </a> SeaTable Admin Manual </label> <div class=md-nav__source> <a href=https://github.com/seatable/seatable-admin-docs/ title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> seatable/seatable-admin-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <div class="md-nav__link md-nav__container"> <a href=../../.. class="md-nav__link "> <span class=md-ellipsis> Introduction </span> </a> <label class="md-nav__link " for=__nav_1 id=__nav_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Introduction </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../requirements/ class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=../../../limitations/system_limitations/ class=md-nav__link> <span class=md-ellipsis> System Limitations </span> </a> </li> <li class=md-nav__item> <a href=../../../get_support/ class=md-nav__link> <span class=md-ellipsis> Get Support </span> </a> </li> <li class=md-nav__item> <a href=../../../dtable-server-license/ class=md-nav__link> <span class=md-ellipsis> EULA </span> </a> </li> <li class=md-nav__item> <a href=../../../changelog/server-changelog/ class=md-nav__link> <span class=md-ellipsis> Changelog </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <div class="md-nav__link md-nav__container"> <a href=../../../installation/ class="md-nav__link "> <span class=md-ellipsis> Installation </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Installation </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex> <span class=md-ellipsis> Basic Setup </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Basic Setup </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Developer-Edition/Deploy%20SeaTable-DE%20with%20Docker/ class=md-nav__link> <span class=md-ellipsis> Developer Edition </span> </a> </li> <li class=md-nav__item> <a href=../../Enterprise-Edition/Deploy%20SeaTable-EE%20with%20Docker/ class=md-nav__link> <span class=md-ellipsis> Enterprise Edition </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3 checked> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex> <span class=md-ellipsis> Additional Componentss </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Additional Componentss </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1 checked> <label class=md-nav__link for=__nav_2_3_1 id=__nav_2_3_1_label tabindex=0> <span class=md-ellipsis> Python Runner </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> Python Runner </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Deploy </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Deploy </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=#requirements class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=#setup-of-seatable-python-runner class=md-nav__link> <span class=md-ellipsis> Setup of SeaTable Python Runner </span> </a> <nav class=md-nav aria-label="Setup of SeaTable Python Runner"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#downloading-the-python-runner-package class=md-nav__link> <span class=md-ellipsis> Downloading the Python Runner Package </span> </a> </li> <li class=md-nav__item> <a href=#installing-the-prerequisites class=md-nav__link> <span class=md-ellipsis> Installing the Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#downloading-the-python-runner-docker-image class=md-nav__link> <span class=md-ellipsis> Downloading the Python Runner Docker Image </span> </a> </li> <li class=md-nav__item> <a href=#initializing-python-runner class=md-nav__link> <span class=md-ellipsis> Initializing Python Runner </span> </a> </li> <li class=md-nav__item> <a href=#modifying-the-configuration-file class=md-nav__link> <span class=md-ellipsis> Modifying the Configuration File </span> </a> <nav class=md-nav aria-label="Modifying the Configuration File"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#limit-access-to-memory-optional class=md-nav__link> <span class=md-ellipsis> Limit access to memory (optional) </span> </a> </li> <li class=md-nav__item> <a href=#customize-time-zone-optional class=md-nav__link> <span class=md-ellipsis> Customize time zone (optional) </span> </a> </li> <li class=md-nav__item> <a href=#set-script-running-timeout class=md-nav__link> <span class=md-ellipsis> Set script running timeout </span> </a> </li> <li class=md-nav__item> <a href=#other-docker-run-options-optional class=md-nav__link> <span class=md-ellipsis> Other docker run options (optional) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#starting-seatable-python-runner class=md-nav__link> <span class=md-ellipsis> Starting SeaTable Python Runner </span> </a> </li> <li class=md-nav__item> <a href=#tweaking-the-python-runner class=md-nav__link> <span class=md-ellipsis> Tweaking the Python Runner </span> </a> <nav class=md-nav aria-label="Tweaking the Python Runner"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#uwsgi-configuration class=md-nav__link> <span class=md-ellipsis> uWSGI configuration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setup-seatable-faas-scheduler class=md-nav__link> <span class=md-ellipsis> Setup SeaTable FAAS Scheduler </span> </a> <nav class=md-nav aria-label="Setup SeaTable FAAS Scheduler"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#downloading-the-fass-scheduler-image class=md-nav__link> <span class=md-ellipsis> Downloading the FASS Scheduler Image </span> </a> </li> <li class=md-nav__item> <a href=#downloading-and-modifying-docker-composeyml class=md-nav__link> <span class=md-ellipsis> Downloading and Modifying docker-compose.yml </span> </a> </li> <li class=md-nav__item> <a href=#initializing-the-database class=md-nav__link> <span class=md-ellipsis> Initializing the Database </span> </a> </li> <li class=md-nav__item> <a href=#modifying-the-configuration-file-of-the-faas-scheduler class=md-nav__link> <span class=md-ellipsis> Modifying the Configuration File of the FAAS Scheduler </span> </a> </li> <li class=md-nav__item> <a href=#starting-the-faas-scheduler class=md-nav__link> <span class=md-ellipsis> Starting the FAAS Scheduler </span> </a> </li> <li class=md-nav__item> <a href=#modifying-the-configuration-file-of-seatable class=md-nav__link> <span class=md-ellipsis> Modifying the Configuration File of SeaTable </span> </a> </li> <li class=md-nav__item> <a href=#restarting-seatable class=md-nav__link> <span class=md-ellipsis> Restarting SeaTable </span> </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=#more-configuration-options-of-scheduler class=md-nav__link> <span class=md-ellipsis> More Configuration Options of Scheduler </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#python-runner-and-faas-scheduler-faq class=md-nav__link> <span class=md-ellipsis> Python Runner and FAAS Scheduler FAQ </span> </a> <nav class=md-nav aria-label="Python Runner and FAAS Scheduler FAQ"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#if-for-whatever-reason-the-installation-fails-how-to-start-from-a-clean-state-again class=md-nav__link> <span class=md-ellipsis> If, for whatever reason, the installation fails, how to start from a clean state again? </span> </a> </li> <li class=md-nav__item> <a href=#whats-the-reason-for-the-following-output-in-seatables-python class=md-nav__link> <span class=md-ellipsis> What's the reason for the following output in SeaTable's Python? </span> </a> </li> <li class=md-nav__item> <a href=#whats-the-reasons-when-the-hello-world-example-to-not-complete-and-only-outputting class=md-nav__link> <span class=md-ellipsis> What's the reasons when the Hello World example to not complete and only outputting? </span> </a> </li> <li class=md-nav__item> <a href=#the-lets-encrypt-ssl-certificate-is-about-to-expire-how-do-i-renew-it class=md-nav__link> <span class=md-ellipsis> The Let's Encrypt SSL certificate is about to expire, how do I renew it? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-run-python-runner-package-using-non-root-user class=md-nav__link> <span class=md-ellipsis> How to run Python Runner Package using non-root user </span> </a> </li> <li class=md-nav__item> <a href=#how-to-run-script-as-non-root-user-inside-python-runner-container class=md-nav__link> <span class=md-ellipsis> How to run script as non-root user inside Python Runner container </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../Update%20SeaTable%20Python%20Runner/ class=md-nav__link> <span class=md-ellipsis> Upgrading </span> </a> </li> <li class=md-nav__item> <a href=../Customize%20SeaTable%20Python%20Runner/ class=md-nav__link> <span class=md-ellipsis> Customization </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../config/enterprise/deploy_onlyoffice_docker/ class=md-nav__link> <span class=md-ellipsis> Online Document Editor </span> </a> </li> <li class=md-nav__item> <a href=../../../config/integrate-with-seafile/ class=md-nav__link> <span class=md-ellipsis> Seafile Integration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <label class=md-nav__link for=__nav_2_4 id=__nav_2_4_label tabindex> <span class=md-ellipsis> Advanced Setups </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> Advanced Setups </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../Cluster/SeaTable%20Cluster/ class=md-nav__link> <span class=md-ellipsis> SeaTable Cluster </span> </a> </li> <li class=md-nav__item> <a href=../../Cluster/dtable-db%20Standalone/ class=md-nav__link> <span class=md-ellipsis> dtable-db Standalone </span> </a> </li> <li class=md-nav__item> <a href=../../Cluster/dtable-events%20Background%20node/ class=md-nav__link> <span class=md-ellipsis> dtable-events Background node </span> </a> </li> <li class=md-nav__item> <a href=../../Cluster/dtable-server%20Cluster/ class=md-nav__link> <span class=md-ellipsis> dtable-server cluster </span> </a> </li> <li class=md-nav__item> <a href=../../../config/enterprise/S3/ class=md-nav__link> <span class=md-ellipsis> S3 Object Storage </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../../config/ class="md-nav__link "> <span class=md-ellipsis> Configuration </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Configuration </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../config/sending_email/ class=md-nav__link> <span class=md-ellipsis> Email Sending </span> </a> </li> <li class=md-nav__item> <a href=../../../config/custom_css/ class=md-nav__link> <span class=md-ellipsis> Custom CSS </span> </a> </li> <li class=md-nav__item> <a href=../../../config/templates_and_manual/ class=md-nav__link> <span class=md-ellipsis> Templates and Manual </span> </a> </li> <li class=md-nav__item> <a href=../../../config/enterprise/roles_permissions/ class=md-nav__link> <span class=md-ellipsis> Roles and Permissions </span> </a> </li> <li class=md-nav__item> <a href=../../../config/frontend_html_template_system/ class=md-nav__link> <span class=md-ellipsis> Frontend </span> </a> </li> <li class=md-nav__item> <a href=../../../config/autostart/ class=md-nav__link> <span class=md-ellipsis> Autostart </span> </a> </li> <li class=md-nav__item> <a href=../../../config/base_rows_limit/ class=md-nav__link> <span class=md-ellipsis> Base Rows Limit </span> </a> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_9> <div class="md-nav__link md-nav__container"> <a href=../../../authentication/ class="md-nav__link "> <span class=md-ellipsis> Authentication </span> </a> <label class="md-nav__link " for=__nav_3_9 id=__nav_3_9_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_9_label aria-expanded=false> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Authentication </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../authentication/two_factor_auth/ class=md-nav__link> <span class=md-ellipsis> 2FA </span> </a> </li> <li class=md-nav__item> <a href=../../../authentication/ldap/ class=md-nav__link> <span class=md-ellipsis> LDAP </span> </a> </li> <li class=md-nav__item> <a href=../../../authentication/oauth/ class=md-nav__link> <span class=md-ellipsis> OAuth </span> </a> </li> <li class=md-nav__item> <a href=../../../authentication/saml/ class=md-nav__link> <span class=md-ellipsis> SAML </span> </a> </li> <li class=md-nav__item> <a href=../../../authentication/jwt/ class=md-nav__link> <span class=md-ellipsis> JWT </span> </a> </li> <li class=md-nav__item> <a href=../../../authentication/auth_switch/ class=md-nav__link> <span class=md-ellipsis> Switch authentication </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10 id=__nav_3_10_label tabindex> <span class=md-ellipsis> Config-Files </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Config-Files </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../config/ccnet-conf/ class=md-nav__link> <span class=md-ellipsis> ccnet.conf </span> </a> </li> <li class=md-nav__item> <a href=../../../config/dtable_db_conf/ class=md-nav__link> <span class=md-ellipsis> dtable-db.conf </span> </a> </li> <li class=md-nav__item> <a href=../../../config/dtable-events-conf/ class=md-nav__link> <span class=md-ellipsis> dtable-events.conf </span> </a> </li> <li class=md-nav__item> <a href=../../../config/dtable_server_config/ class=md-nav__link> <span class=md-ellipsis> dtable_server_config </span> </a> </li> <li class=md-nav__item> <a href=../../../config/dtable_storage_server_conf/ class=md-nav__link> <span class=md-ellipsis> dtable-storage-server.conf </span> </a> </li> <li class=md-nav__item> <a href=../../../config/dtable_web_settings/ class=md-nav__link> <span class=md-ellipsis> dtable_web_settings.py </span> </a> </li> <li class=md-nav__item> <a href=../../../config/seafile-conf/ class=md-nav__link> <span class=md-ellipsis> seafile.conf </span> </a> </li> <li class=md-nav__item> <a href=../../../config/seatable-controller-conf/ class=md-nav__link> <span class=md-ellipsis> seatable-controller.conf </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Maintenance/Upgrade </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Maintenance/Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <div class="md-nav__link md-nav__container"> <a href=../../../maintain/ class="md-nav__link "> <span class=md-ellipsis> Maintenance </span> </a> <label class="md-nav__link " for=__nav_4_1 id=__nav_4_1_label tabindex> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> Maintenance </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../maintain/backup_recovery/ class=md-nav__link> <span class=md-ellipsis> Backup and Recovery </span> </a> </li> <li class=md-nav__item> <a href=../../../maintain/clean_database/ class=md-nav__link> <span class=md-ellipsis> Clean Database </span> </a> </li> <li class=md-nav__item> <a href=../../../maintain/seatable_gc/ class=md-nav__link> <span class=md-ellipsis> Clean Storage </span> </a> </li> <li class=md-nav__item> <a href=../../../maintain/seatable_fsck/ class=md-nav__link> <span class=md-ellipsis> Filesystem check </span> </a> </li> <li class=md-nav__item> <a href=../../../maintain/others/ class=md-nav__link> <span class=md-ellipsis> Change URL </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex> <span class=md-ellipsis> Upgrade </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Upgrade </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../upgrade/upgrade_manual/ class=md-nav__link> <span class=md-ellipsis> How to upgrade </span> </a> </li> <li class=md-nav__item> <a href=../../../upgrade/extra-upgrade-notice/ class=md-nav__link> <span class=md-ellipsis> Extra Upgrade Notices </span> </a> </li> <li class=md-nav__item> <a href=../../Enterprise-Edition/migrate_from_seatable_ce_server/ class=md-nav__link> <span class=md-ellipsis> Migrate between editions </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#components class=md-nav__link> <span class=md-ellipsis> Components </span> </a> </li> <li class=md-nav__item> <a href=#requirements class=md-nav__link> <span class=md-ellipsis> Requirements </span> </a> </li> <li class=md-nav__item> <a href=#setup class=md-nav__link> <span class=md-ellipsis> Setup </span> </a> </li> <li class=md-nav__item> <a href=#setup-of-seatable-python-runner class=md-nav__link> <span class=md-ellipsis> Setup of SeaTable Python Runner </span> </a> <nav class=md-nav aria-label="Setup of SeaTable Python Runner"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#downloading-the-python-runner-package class=md-nav__link> <span class=md-ellipsis> Downloading the Python Runner Package </span> </a> </li> <li class=md-nav__item> <a href=#installing-the-prerequisites class=md-nav__link> <span class=md-ellipsis> Installing the Prerequisites </span> </a> </li> <li class=md-nav__item> <a href=#downloading-the-python-runner-docker-image class=md-nav__link> <span class=md-ellipsis> Downloading the Python Runner Docker Image </span> </a> </li> <li class=md-nav__item> <a href=#initializing-python-runner class=md-nav__link> <span class=md-ellipsis> Initializing Python Runner </span> </a> </li> <li class=md-nav__item> <a href=#modifying-the-configuration-file class=md-nav__link> <span class=md-ellipsis> Modifying the Configuration File </span> </a> <nav class=md-nav aria-label="Modifying the Configuration File"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#limit-access-to-memory-optional class=md-nav__link> <span class=md-ellipsis> Limit access to memory (optional) </span> </a> </li> <li class=md-nav__item> <a href=#customize-time-zone-optional class=md-nav__link> <span class=md-ellipsis> Customize time zone (optional) </span> </a> </li> <li class=md-nav__item> <a href=#set-script-running-timeout class=md-nav__link> <span class=md-ellipsis> Set script running timeout </span> </a> </li> <li class=md-nav__item> <a href=#other-docker-run-options-optional class=md-nav__link> <span class=md-ellipsis> Other docker run options (optional) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#starting-seatable-python-runner class=md-nav__link> <span class=md-ellipsis> Starting SeaTable Python Runner </span> </a> </li> <li class=md-nav__item> <a href=#tweaking-the-python-runner class=md-nav__link> <span class=md-ellipsis> Tweaking the Python Runner </span> </a> <nav class=md-nav aria-label="Tweaking the Python Runner"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#uwsgi-configuration class=md-nav__link> <span class=md-ellipsis> uWSGI configuration </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#setup-seatable-faas-scheduler class=md-nav__link> <span class=md-ellipsis> Setup SeaTable FAAS Scheduler </span> </a> <nav class=md-nav aria-label="Setup SeaTable FAAS Scheduler"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#downloading-the-fass-scheduler-image class=md-nav__link> <span class=md-ellipsis> Downloading the FASS Scheduler Image </span> </a> </li> <li class=md-nav__item> <a href=#downloading-and-modifying-docker-composeyml class=md-nav__link> <span class=md-ellipsis> Downloading and Modifying docker-compose.yml </span> </a> </li> <li class=md-nav__item> <a href=#initializing-the-database class=md-nav__link> <span class=md-ellipsis> Initializing the Database </span> </a> </li> <li class=md-nav__item> <a href=#modifying-the-configuration-file-of-the-faas-scheduler class=md-nav__link> <span class=md-ellipsis> Modifying the Configuration File of the FAAS Scheduler </span> </a> </li> <li class=md-nav__item> <a href=#starting-the-faas-scheduler class=md-nav__link> <span class=md-ellipsis> Starting the FAAS Scheduler </span> </a> </li> <li class=md-nav__item> <a href=#modifying-the-configuration-file-of-seatable class=md-nav__link> <span class=md-ellipsis> Modifying the Configuration File of SeaTable </span> </a> </li> <li class=md-nav__item> <a href=#restarting-seatable class=md-nav__link> <span class=md-ellipsis> Restarting SeaTable </span> </a> </li> <li class=md-nav__item> <a href=#testing class=md-nav__link> <span class=md-ellipsis> Testing </span> </a> </li> <li class=md-nav__item> <a href=#more-configuration-options-of-scheduler class=md-nav__link> <span class=md-ellipsis> More Configuration Options of Scheduler </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#python-runner-and-faas-scheduler-faq class=md-nav__link> <span class=md-ellipsis> Python Runner and FAAS Scheduler FAQ </span> </a> <nav class=md-nav aria-label="Python Runner and FAAS Scheduler FAQ"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#if-for-whatever-reason-the-installation-fails-how-to-start-from-a-clean-state-again class=md-nav__link> <span class=md-ellipsis> If, for whatever reason, the installation fails, how to start from a clean state again? </span> </a> </li> <li class=md-nav__item> <a href=#whats-the-reason-for-the-following-output-in-seatables-python class=md-nav__link> <span class=md-ellipsis> What's the reason for the following output in SeaTable's Python? </span> </a> </li> <li class=md-nav__item> <a href=#whats-the-reasons-when-the-hello-world-example-to-not-complete-and-only-outputting class=md-nav__link> <span class=md-ellipsis> What's the reasons when the Hello World example to not complete and only outputting? </span> </a> </li> <li class=md-nav__item> <a href=#the-lets-encrypt-ssl-certificate-is-about-to-expire-how-do-i-renew-it class=md-nav__link> <span class=md-ellipsis> The Let's Encrypt SSL certificate is about to expire, how do I renew it? </span> </a> </li> <li class=md-nav__item> <a href=#how-to-run-python-runner-package-using-non-root-user class=md-nav__link> <span class=md-ellipsis> How to run Python Runner Package using non-root user </span> </a> </li> <li class=md-nav__item> <a href=#how-to-run-script-as-non-root-user-inside-python-runner-container class=md-nav__link> <span class=md-ellipsis> How to run script as non-root user inside Python Runner container </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=deploy-seatable-python-runner>Deploy SeaTable Python Runner<a class=headerlink href=#deploy-seatable-python-runner title="Permanent link">&para;</a></h1> <h2 id=components>Components<a class=headerlink href=#components title="Permanent link">&para;</a></h2> <p>The execution of Python scripts in SeaTable requires the interaction of SeaTable with two other components. The functions of SeaTable, SeaTable FAAS Scheduler, and SeaTable Python Runner and their relationship are as follows:</p> <ul> <li>SeaTable: Provides the editor to create, save, import/export, and modify Python scripts. When a user clicks to run a script, SeaTable sends a requests to the SeaTable FAAS Scheduler.</li> <li>SeaTable FAAS Scheduler: Handles incoming requests from SeaTable, schedules tasks, and sends requests to the SeaTable Python Runner. Additionally, it saves and counts the results of script runs. As such, it is equivalent to a master node.</li> <li>SeaTable Python Runner: Runs the scripts as tasked by the FAAS Scheduler. When the SeaTable Python Runner receives a request, it downloads the script content and starts a Docker container to run the script. After script execution, the container is destroyed for data security. As such, it is equivalent to a worker node.</li> </ul> <p><img alt=python-runner src=../../../images/auto-upload/python-runner.png></p> <p>If SeaTable runs many Python scripts and timely script execution is essential, multiple Python Runners can be deployed with a load balance component distributing the load.</p> <p><img alt=python-runner-cluster src=../../../images/auto-upload/python-runner-cluster.png></p> <h2 id=requirements>Requirements<a class=headerlink href=#requirements title="Permanent link">&para;</a></h2> <p>SeaTable FAAS Scheduler and SeaTable Python Runner require 2 cores and 4GB RAM. These resources are a minimum requirement. With rising numbers of executed Python scripts, the allocated resources should be upped.</p> <p>It is strongly recommended to install SeaTable FAAS Scheduler and Python Runner on a separate host. Running these two components on the same machine as SeaTable is very likely to cause conflicts.</p> <p>These instructions assume that no other services are installed on the host, especially no other services listening on port 80 and 443.</p> <p>SeaTable FAAS Scheduler and Python Runner use Docker and Docker Compose. Docker must be 20.04 or more recent. Verify the installed Docker version using <code>docker --version</code>. If your version is too old, update following the <a href=https://docs.docker.com/engine/install/centos/ >official instructions</a>.</p> <h2 id=setup>Setup<a class=headerlink href=#setup title="Permanent link">&para;</a></h2> <p>The SeaTable and SeaTable FAAS Scheduler host communicate via their hostnames. For illustrative purposes, these deployment instructions use the hostnames ...</p> <ul> <li>cloud.seatable.com for SeaTable and</li> <li>faas.seatable.com for SeaTable FAAS Scheduler.</li> </ul> <p>Additionally, the following assumptions and conventions are used in the rest of this document:</p> <ul> <li>SeaTable Server - SeaTable Developer Edition or SeaTable Enterprise Edition - was installed according to this manual.</li> <li><code>/opt/seatable-python-runner</code> and <code>/opt/seatable-faas-scheduler</code> are the directories of the Python Runner and FAAS Scheduler, respectively. If you decide to put them in different directories - which you can - adjust all paths accordingly.</li> <li>SeaTable FAAS Scheduler uses two <a href=https://docs.docker.com/storage/volumes/ >Docker volumes</a> for persisting data generated in its database and SeaTable FAAS Scheduler Docker container. The volumes' <a href=https://docs.docker.com/compose/compose-file/compose-file-v2/#volumes>host paths</a> are /opt/seatable-faas-scheduler/mysql-data and /opt/seatable-faas-scheduler/shared, respectively. It is not recommended to change these paths. If you do, keep that in mind when following these instructions.</li> <li>All configuration and log files for SeaTable and the webserver Nginx are stored in the volume of the SeaTable FAAS Scheduler container.</li> </ul> <h2 id=setup-of-seatable-python-runner>Setup of SeaTable Python Runner<a class=headerlink href=#setup-of-seatable-python-runner title="Permanent link">&para;</a></h2> <h3 id=downloading-the-python-runner-package>Downloading the Python Runner Package<a class=headerlink href=#downloading-the-python-runner-package title="Permanent link">&para;</a></h3> <p>Download the install package from <a href=https://github.com/seatable/seatable-admin-docs/releases>Github</a> using wget and unzip the archive. Delete the ZIP file after unzipping. Using Python Runner version 2.0.2 as an example, this are the commands:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>/opt
wget<span class=w> </span>https://github.com/seatable/seatable-admin-docs/releases/download/seatable-python-runner-2.0.2/seatable-python-runner-2.0.2.zip
unzip<span class=w> </span>seatable-python-runner-2.0.2.zip
rm<span class=w> </span>seatable-python-runner-2.0.2.zip
</code></pre></div> <h3 id=installing-the-prerequisites>Installing the Prerequisites<a class=headerlink href=#installing-the-prerequisites title="Permanent link">&para;</a></h3> <p>SeaTable's Python Runner uses some pip packages. Install pip first:</p> <div class=highlight><pre><span></span><code><span class=c1># CentOS</span>
sudo<span class=w> </span>yum<span class=w> </span>install<span class=w> </span>python3-pip<span class=w> </span>-y

<span class=c1># Debian/Ubuntu</span>
sudo<span class=w> </span>apt<span class=w> </span>install<span class=w> </span>python3-pip<span class=w> </span>-y
</code></pre></div> <p>Then install the pip packages:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>/opt/seatable-python-runner
sudo<span class=w> </span>pip3<span class=w> </span>install<span class=w> </span>-r<span class=w> </span>server_requirements.txt
</code></pre></div> <h3 id=downloading-the-python-runner-docker-image>Downloading the Python Runner Docker Image<a class=headerlink href=#downloading-the-python-runner-docker-image title="Permanent link">&para;</a></h3> <p>Pull the image for SeaTable's Python Runner from Docker Hub:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span>pull<span class=w> </span>seatable/python-runner:latest
</code></pre></div> <p>You can find all versions of Python Runner images in <a href=https://hub.docker.com/r/seatable/python-runner/tags>Docker repository</a>.</p> <h3 id=initializing-python-runner>Initializing Python Runner<a class=headerlink href=#initializing-python-runner title="Permanent link">&para;</a></h3> <p>Initialize the Python Runner by running the init script:</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>./init.sh
</code></pre></div> <h3 id=modifying-the-configuration-file>Modifying the Configuration File<a class=headerlink href=#modifying-the-configuration-file title="Permanent link">&para;</a></h3> <p>Open the Python Runner's conf file in an editor and add the address of SeaTable's FAAS Scheduler to the configuration:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>/opt/seatable-python-runner/conf
nano<span class=w> </span>seatable_python_runner_settings.py
</code></pre></div> <p>Edit the configuration as follows:</p> <div class=highlight><pre><span></span><code><span class=n>SCHEDULER_URL</span> <span class=o>=</span> <span class=s1>&#39;https://faas.seatable.com&#39;</span>  <span class=c1># The URL of seatable-faas-scheduler, if you use an IP address, please add http://</span>
</code></pre></div> <h4 id=limit-access-to-memory-optional>Limit access to memory (optional)<a class=headerlink href=#limit-access-to-memory-optional title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><span class=n>CONTAINER_MEMORY</span> <span class=o>=</span> <span class=s1>&#39;2g&#39;</span>  <span class=c1># Up to 2GB of memory</span>
</code></pre></div> <p>On Ubuntu or Debian hosts, You may see messages similar to the following when working with an image.</p> <div class=highlight><pre><span></span><code>WARNING: Your kernel does not support swap limit capabilities. Limitation discarded.
</code></pre></div> <p>This warning does not occur on RPM-based systems, which enable these capabilities by default.</p> <p>You can set CONTAINER_MEMORY to empty to avoid this warning:</p> <div class=highlight><pre><span></span><code><span class=n>CONTAINER_MEMORY</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</code></pre></div> <p>Or you can change some configuration on the host.</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>nano<span class=w> </span>/etc/default/grub
</code></pre></div> <p>Add or modify following configuration</p> <div class=highlight><pre><span></span><code>GRUB_CMDLINE_LINUX=&quot;cgroup_enable=memory swapaccount=1&quot;
</code></pre></div> <p>Save and quit, and update GRUB</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>update-grub
</code></pre></div> <p>If your GRUB configuration file has incorrect syntax, an error occurs. In this case, repeat above steps.</p> <p>The changes take effect when the system is rebooted.</p> <p>Additionally, default memory limit is 2GB, if you don't want to limit container to access memory, you can set it to empty string. In this way, above update about GRUB is not necessary.</p> <div class=highlight><pre><span></span><code><span class=n>CONTAINER_MEMORY</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>
</code></pre></div> <p><strong>Related Documentation</strong></p> <ul> <li><a href=https://docs.docker.com/config/containers/resource_constraints/#memory>docker runtime options with Memory</a></li> <li><a href=https://docs.docker.com/engine/install/linux-postinstall/#your-kernel-does-not-support-cgroup-swap-limit-capabilities>Kernel does not support warning</a></li> </ul> <h4 id=customize-time-zone-optional>Customize time zone (optional)<a class=headerlink href=#customize-time-zone-optional title="Permanent link">&para;</a></h4> <p>This feature requires runner packages on 2.0.3 and above, and runner image on 2.5.4 and above.</p> <p>Add time zone item to the configuration, indicating that the time zone in runner contianer.</p> <div class=highlight><pre><span></span><code><span class=n>TIME_ZONE</span> <span class=o>=</span> <span class=s1>&#39;UTC&#39;</span>
</code></pre></div> <p>If not configured, the default is the system time zone, if the system time zone is not read, it is the UTC time zone.</p> <p>If the version does not meet the requirements, the time zone is the UTC time zone.</p> <h4 id=set-script-running-timeout>Set script running timeout<a class=headerlink href=#set-script-running-timeout title="Permanent link">&para;</a></h4> <div class=highlight><pre><span></span><code><span class=n>SUB_PROCESS_TIMEOUT</span> <span class=o>=</span> <span class=mi>60</span> <span class=o>*</span> <span class=mi>15</span>  <span class=c1># 15 mins</span>
</code></pre></div> <p>If not configured, the default is 15 minutes</p> <h4 id=other-docker-run-options-optional>Other docker run options (optional)<a class=headerlink href=#other-docker-run-options-optional title="Permanent link">&para;</a></h4> <p>This feature requires runner packages on 2.0.5 and above, and runner image on 2.5.4 and above, experimental, please edit carefully.</p> <p>Add the following configuration to the configuration file to modify the parameters when starting the container, the options must be set in the form of <code>--&lt;option name&gt;=&lt;value&gt;</code></p> <div class=highlight><pre><span></span><code><span class=n>OTHER_OPTIONS</span> <span class=o>=</span> <span class=p>[]</span>
</code></pre></div> <p>For example, you need to modify the network that the container is connected to when it starts</p> <div class=highlight><pre><span></span><code><span class=n>OTHER_OPTIONS</span> <span class=o>=</span> <span class=p>[</span>
  <span class=s2>&quot;--network=xxx&quot;</span>  <span class=c1># xxx needs to exist</span>
<span class=p>]</span>
</code></pre></div> <p>For the specific meaning of each, see <a href=https://docs.docker.com/engine/reference/commandline/run/#options>the official docker documentation</a></p> <h3 id=starting-seatable-python-runner>Starting SeaTable Python Runner<a class=headerlink href=#starting-seatable-python-runner title="Permanent link">&para;</a></h3> <p>Start SeaTable Python Runner using the SH-script:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>/opt/seatable-python-runner
sudo<span class=w> </span>./start.sh
</code></pre></div> <p>After the execution of the start script, the directory structure looks as follows:</p> <div class=highlight><pre><span></span><code>$<span class=w> </span>tree<span class=w> </span>/opt/seatable-python-runner/<span class=w> </span>-L<span class=w> </span><span class=m>2</span>
/opt/seatable-python-runner/
├──<span class=w> </span>conf
│<span class=w>   </span>├──<span class=w> </span>seatable_python_runner.ini
│<span class=w>   </span>└──<span class=w> </span>seatable_python_runner_settings.py
├──<span class=w> </span><span class=k>function</span>.py
├──<span class=w> </span>init.sh
├──<span class=w> </span>logs
│<span class=w>   </span>├──<span class=w> </span>seatable-python-runner.log
│<span class=w>   </span>└──<span class=w> </span>uwsgi.log
├──<span class=w> </span>server_requirements.txt
├──<span class=w> </span>settings.py
├──<span class=w> </span>start.sh
├──<span class=w> </span>stop.sh
└──<span class=w> </span>uwsgi.ini
</code></pre></div> <p>The stop command is as follows:</p> <div class=highlight><pre><span></span><code>sudo<span class=w> </span>./stop.sh
</code></pre></div> <p>NOTE: The start and stop scripts are a collection of a series of operations, you can edit it according to your needs.</p> <h3 id=tweaking-the-python-runner>Tweaking the Python Runner<a class=headerlink href=#tweaking-the-python-runner title="Permanent link">&para;</a></h3> <h4 id=uwsgi-configuration>uWSGI configuration<a class=headerlink href=#uwsgi-configuration title="Permanent link">&para;</a></h4> <p>The SeaTable Python Runner uses uWSGI. uWSGI's configuration is saved in the INI-file <code>seatable_python_runner.ini</code> in <code>/opt/seatable-python-runner/conf</code>.</p> <p>The default configuration for SeaTable Python Runner 2.0.2 is:</p> <div class=highlight><pre><span></span><code><span class=k>[uwsgi]</span>
<span class=na>http</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>:8080</span>
<span class=na>wsgi-file</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>function.py</span>
<span class=na>callable</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>app</span>
<span class=na>process</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>4</span>
<span class=na>threads</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>2</span>
<span class=na>buffer-size</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>65536</span>
<span class=na>stats</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>127.0.0.1:9191</span>
<span class=na>daemonize</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>logs/uwsgi.log</span>
<span class=na>disable-logging</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>false</span>
<span class=na>procname-prefix</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>run-python</span>
<span class=na>logformat</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s>[%(ltime)] %(method) %(uri) =&gt; generated %(size) bytes in %(secs) seconds</span>
</code></pre></div> <p>NOTE: The configuration may look different for other versions of SeaTable Python Runner.</p> <h2 id=setup-seatable-faas-scheduler>Setup SeaTable FAAS Scheduler<a class=headerlink href=#setup-seatable-faas-scheduler title="Permanent link">&para;</a></h2> <p><strong>Please note: Check Docker version is 20.10.10 or greater before deploying FAAS Scheduler</strong></p> <h3 id=downloading-the-fass-scheduler-image>Downloading the FASS Scheduler Image<a class=headerlink href=#downloading-the-fass-scheduler-image title="Permanent link">&para;</a></h3> <p>Pull the image for SeaTable's FAAS Scheduler from Docker Hub:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span>pull<span class=w> </span>seatable/seatable-faas-scheduler:latest
</code></pre></div> <p>You can find all versions of SeaTable FAAS Scheduler images in the <a href=https://hub.docker.com/r/seatable/seatable-faas-scheduler/tags>Docker repository</a>.</p> <h3 id=downloading-and-modifying-docker-composeyml>Downloading and Modifying docker-compose.yml<a class=headerlink href=#downloading-and-modifying-docker-composeyml title="Permanent link">&para;</a></h3> <p>Download the <a href=../docker-compose.yml>docker-compose.yml</a> sample file to the FAAS Scheduler's directory and modify the file to fit your environment and settings:</p> <div class=highlight><pre><span></span><code>mkdir<span class=w> </span>/opt/seatable-faas-scheduler
<span class=nb>cd</span><span class=w> </span>/opt/seatable-faas-scheduler
wget<span class=w> </span>-O<span class=w> </span><span class=s2>&quot;docker-compose.yml&quot;</span><span class=w> </span><span class=s2>&quot;https://manual.seatable.io/docker/Python-Runner/docker-compose.yml&quot;</span>
nano<span class=w> </span>docker-compose.yml
</code></pre></div> <p>The following options must be modified:</p> <ul> <li>The password of MariaDB root (MYSQL_ROOT_PASSWORD and DB_ROOT_PASSWD)</li> <li>The use of Let's Encrypt for HTTPS (SEATABLE_FAAS_SCHEDULER_SERVER_LETSENCRYPT)</li> <li>The host name (SEATABLE_FAAS_SCHEDULER_SERVER_HOSTNAME)</li> </ul> <p>Optional customizable option in the docker-compose.yml are:</p> <ul> <li>The ports of the container seatable-faas-scheduler</li> <li>The volume paths for the container db</li> <li>The volume paths for the container seatable-faas-scheduler</li> <li> <p>The image tag of the SeaTable FAAS Scheduler version to install (image)</p> </li> <li> <p>The time zone (Optional)</p> </li> </ul> <h3 id=initializing-the-database>Initializing the Database<a class=headerlink href=#initializing-the-database title="Permanent link">&para;</a></h3> <p>Initialize the database with the following command:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>/opt/seatable-faas-scheduler
docker<span class=w> </span>compose<span class=w> </span>up
</code></pre></div> <p>NOTE: You should run the above command in a directory with the <code>docker-compose.yml</code>.</p> <p>Wait for a while. When you see <code>This is an idle script (infinite loop) to keep container running.</code> in the output log, the database initialized successfully. Press keyboard <code>CTRL + C</code>  to return to the prompt.</p> <p>The directory structure should now look as follows (slightly shortend):</p> <div class=highlight><pre><span></span><code>$ tree /opt/seatable-faas-scheduler -L 2
/opt/seatable-faas-scheduler
├── docker-compose.yml
├── mysql-data
├── shared
│   ├── seatable-faas-scheduler
│   │   ├── conf     (configuration files)
│   │   ├── scripts  (script files)
│   │   └── logs     (log files)
│   ├── nginx-logs   (Nginx logs)
│   └── ssl          (SSL certificate)
</code></pre></div> <h3 id=modifying-the-configuration-file-of-the-faas-scheduler>Modifying the Configuration File of the FAAS Scheduler<a class=headerlink href=#modifying-the-configuration-file-of-the-faas-scheduler title="Permanent link">&para;</a></h3> <p>Being the middle component between the SeaTable server and the Python Runner, the FAAS Scheduler's configuration must be added the addresses of both.</p> <p>Open the FAAS Scheduler's configuration file in a text editor:</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>/opt/seatable-faas-scheduler/shared/seatable-faas-scheduler/conf
nano<span class=w> </span>seatable_faas_scheduler_settings.py
</code></pre></div> <p>Edit the configuration as follows:</p> <div class=highlight><pre><span></span><code><span class=c1># faas</span>
<span class=n>RUNNER_URL</span> <span class=o>=</span> <span class=s1>&#39;http://host.docker.internal:8080&#39;</span>        <span class=c1># Internal address of the Python Runner</span>
<span class=n>FAAS_URL</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span>                                          <span class=c1># Old parameter name for internal address of the Python Runner, is kept for compatability reasons</span>

<span class=c1># seatable</span>
<span class=n>DTABLE_WEB_SERVICE_URL</span> <span class=o>=</span> <span class=s1>&#39;https://cloud.seatable.com&#39;</span>  <span class=c1># URL of SeaTable server</span>
<span class=n>SEATABLE_FAAS_AUTH_TOKEN</span> <span class=o>=</span> <span class=s1>&#39;***&#39;</span>                       <span class=c1># Token to copy to SeaTable&#39;s configuration file</span>
</code></pre></div> <h3 id=starting-the-faas-scheduler>Starting the FAAS Scheduler<a class=headerlink href=#starting-the-faas-scheduler title="Permanent link">&para;</a></h3> <p>Now start the SeaTable FAAS Scheduler in detached mode:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span>compose<span class=w> </span>up<span class=w> </span>-d
</code></pre></div> <p>NOTE: You should run the above command in the directory with the <code>docker-compose.yml</code>.</p> <h3 id=modifying-the-configuration-file-of-seatable>Modifying the Configuration File of SeaTable<a class=headerlink href=#modifying-the-configuration-file-of-seatable title="Permanent link">&para;</a></h3> <p>Open SeaTable's <code>dtable_web_setttings.py</code> configuration file in a text editor to add the FAAS Scheduler's address:</p> <div class=highlight><pre><span></span><code>nano<span class=w> </span>/opt/seatable/seatable-data/seatable/conf/dtable_web_settings.py
</code></pre></div> <p>Paste the following lines in the configuration file, paste the token from the <code>seatable_faas_scheduler_settings.py</code> and modify the parameter SEATABLE_FAAS_URL:</p> <div class=highlight><pre><span></span><code><span class=c1># for seatable-faas</span>
<span class=n>SEATABLE_FAAS_AUTH_TOKEN</span> <span class=o>=</span> <span class=s1>&#39;***&#39;</span>                        <span class=c1># Token from seatable_faas_scheduler_settings.py</span>
<span class=n>SEATABLE_FAAS_URL</span> <span class=o>=</span> <span class=s1>&#39;https://faas.seatable.com&#39;</span>         <span class=c1># URL of the SeaTable FAAS Scheduler</span>
</code></pre></div> <h3 id=restarting-seatable>Restarting SeaTable<a class=headerlink href=#restarting-seatable title="Permanent link">&para;</a></h3> <p>For the modifications in the <code>dtable_web_settings.py</code> to take effect, restart the SeaTable server:</p> <div class=highlight><pre><span></span><code>docker<span class=w> </span><span class=nb>exec</span><span class=w> </span>-d<span class=w> </span>seatable<span class=w> </span>/shared/seatable/scripts/seatable.sh<span class=w> </span>restart
</code></pre></div> <h3 id=testing>Testing<a class=headerlink href=#testing title="Permanent link">&para;</a></h3> <p>Create a simple Python script in SeaTable. The simplest is a hello world:</p> <div class=highlight><pre><span></span><code><span class=nb>print</span><span class=p>(</span><span class=s2>&quot;Hello World!&quot;</span><span class=p>)</span>
</code></pre></div> <p>If the output console prints "Hello World!", you have successfully configured SeaTable's Python script execution environment.</p> <h3 id=more-configuration-options-of-scheduler>More Configuration Options of Scheduler<a class=headerlink href=#more-configuration-options-of-scheduler title="Permanent link">&para;</a></h3> <p>If you set <code>SEATABLE_FAAS_SCHEDULER_SERVER_LETSENCRYPT</code> to <code>true</code> in "docker-compose.yml", the container would request a letsencrypt-signed SSL certificate for you automatically.</p> <p>e.g.</p> <div class=highlight><pre><span></span><code>  seatable-faas-scheduler:
    ...
    ports:
      - &quot;80:80&quot;
      - &quot;443:443&quot;
      ...
    environment:
      ...
      - SEATABLE_FAAS_SCHEDULER_SERVER_LETSENCRYPT=True  # Default is False. Whether to use let&#39;s encrypt certificate.
      - SEATABLE_FAAS_SCHEDULER_SERVER_HOSTNAME=demo.faas-scheduler.seatable.com  # Specifies your host name if https is enabled
</code></pre></div> <p><strong>Note</strong>：Since the nginx configuration file is only generated automatically when you run the container for the first time, you'd better set <code>SEATABLE_FAAS_SCHEDULER_SERVER_HOSTNAME=True</code> before executing the <code>docker compose up -d</code> command for the first time.</p> <p>If you want to use your own SSL certificate, you can refer to the following steps:</p> <ol> <li>Upload the SSL certificate file to the Scheduler data directory : <code>/Your Scheduler data volume/ssl/</code></li> <li>Modify the nginx configuration file : <code>/Your Scheduler data volume/seatable-faas-scheduler/conf/nginx.conf</code></li> <li>Reload the Nginx configuration file：<code>docker exec -it seatable-faas-scheduler /usr/sbin/nginx -s reload</code></li> </ol> <p>e.g.</p> <div class=highlight><pre><span></span><code><span class=w>  </span><span class=k>server</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kn>if</span><span class=w> </span><span class=s>(</span><span class=nv>$host</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s>demo.faas-scheduler.seatable.com)</span><span class=w> </span><span class=p>{</span>
<span class=w>          </span><span class=kn>return</span><span class=w> </span><span class=mi>301</span><span class=w> </span><span class=s>https://</span><span class=nv>$host$request_uri</span><span class=p>;</span>
<span class=w>      </span><span class=p>}</span>
<span class=w>      </span><span class=kn>listen</span><span class=w> </span><span class=mi>80</span><span class=p>;</span>
<span class=w>      </span><span class=kn>server_name</span><span class=w> </span><span class=s>demo.faas-scheduler.seatable.com</span><span class=p>;</span>
<span class=w>      </span><span class=kn>return</span><span class=w> </span><span class=mi>404</span><span class=p>;</span>
<span class=w>  </span><span class=p>}</span>

<span class=w>  </span><span class=k>server</span><span class=w> </span><span class=p>{</span>
<span class=w>      </span><span class=kn>server_name</span><span class=w> </span><span class=s>demo.faas-scheduler.seatable.com</span><span class=p>;</span>

<span class=w>      </span><span class=kn>listen</span><span class=w> </span><span class=mi>443</span><span class=w> </span><span class=s>ssl</span><span class=p>;</span>
<span class=w>      </span><span class=kn>ssl_certificate</span><span class=w> </span><span class=s>/shared/ssl/&lt;your-ssl.cer&gt;</span><span class=p>;</span>
<span class=w>      </span><span class=kn>ssl_certificate_key</span><span class=w> </span><span class=s>/shared/ssl/&lt;your-ssl.key&gt;</span><span class=p>;</span>

<span class=w>      </span><span class=kn>proxy_set_header</span><span class=w> </span><span class=s>X-Forwarded-For</span><span class=w> </span><span class=nv>$remote_addr</span><span class=p>;</span>
<span class=w>      </span><span class=kn>......</span>
</code></pre></div> <h2 id=python-runner-and-faas-scheduler-faq>Python Runner and FAAS Scheduler FAQ<a class=headerlink href=#python-runner-and-faas-scheduler-faq title="Permanent link">&para;</a></h2> <h3 id=if-for-whatever-reason-the-installation-fails-how-to-start-from-a-clean-state-again>If, for whatever reason, the installation fails, how to start from a clean state again?<a class=headerlink href=#if-for-whatever-reason-the-installation-fails-how-to-start-from-a-clean-state-again title="Permanent link">&para;</a></h3> <p>Remove the directory <code>/opt/seatable-faas-scheduler</code> and start again.</p> <h3 id=whats-the-reason-for-the-following-output-in-seatables-python>What's the reason for the following output in SeaTable's Python?<a class=headerlink href=#whats-the-reason-for-the-following-output-in-seatables-python title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>error: Internal Server Error.
at e/&lt;/&lt;
</code></pre></div> <p>SeaTable cannot communicate with the FAAS Scheduler. Check the configuration and start the FAAS Scheduler via docker-compose.</p> <h3 id=whats-the-reasons-when-the-hello-world-example-to-not-complete-and-only-outputting>What's the reasons when the Hello World example to not complete and only outputting?<a class=headerlink href=#whats-the-reasons-when-the-hello-world-example-to-not-complete-and-only-outputting title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code>Running...
</code></pre></div> <p>The FAAS Scheduler cannot communicate with the Python Runner. Check the configuration and start the FAAS Scheduler via the SH-script.</p> <h3 id=the-lets-encrypt-ssl-certificate-is-about-to-expire-how-do-i-renew-it>The Let's Encrypt SSL certificate is about to expire, how do I renew it?<a class=headerlink href=#the-lets-encrypt-ssl-certificate-is-about-to-expire-how-do-i-renew-it title="Permanent link">&para;</a></h3> <p>The SSL certificate shoud be renewed automatically 30 days prior to it expiration. If the automatic renewal fails, this command renews the certificate manually:</p> <div class=highlight><pre><span></span><code>docker exec -it seatable-faas-scheduler /scripts/renew_cert.sh
</code></pre></div> <h3 id=how-to-run-python-runner-package-using-non-root-user>How to run Python Runner Package using non-root user<a class=headerlink href=#how-to-run-python-runner-package-using-non-root-user title="Permanent link">&para;</a></h3> <p>Assume that the runner user runs the package and the package has been downloaded to /root/seatable-python-runner-x.x.x.zip.</p> <p>Create runner user and home directory.</p> <div class=highlight><pre><span></span><code># useradd runner -m
</code></pre></div> <p>Since the package program needs to call docker, but the new user runner may not have permission to use docker, the verification method is as follows.</p> <div class=highlight><pre><span></span><code># su - runner       # Switch to runner user
$ docker version    # Try to call docker
</code></pre></div> <p>If you see permission denied or similar words, the runner user cannot call docker, ctrl + D exit the current session, and then use the following command to make the runner join the docker user group.</p> <div class=highlight><pre><span></span><code># usermod -aG docker runner
</code></pre></div> <p>After running, you can use the su command again to switch to retry whether you can call docker.</p> <p>If you still need to deploy seatable-python-runner to the /opt directory, please switch back from user runner and execute the following command.</p> <div class=highlight><pre><span></span><code># unzip /root/seatable-python-runner-x.x.x.zip -d /opt
# chown runner:runner /opt/seatable-python-runner -R
</code></pre></div> <p>Use the su command again to switch to the runner user.</p> <div class=highlight><pre><span></span><code># su - runner
$ cd /opt/seatable-python-runner
</code></pre></div> <p>Then follow the documentation to continue setup and deployment.</p> <h3 id=how-to-run-script-as-non-root-user-inside-python-runner-container>How to run script as non-root user inside Python Runner container<a class=headerlink href=#how-to-run-script-as-non-root-user-inside-python-runner-container title="Permanent link">&para;</a></h3> <p>Please deploy version 2.0.2 or later of Python Runner package.</p> <p>Suppose you want to run scripts as the runner user in the container.</p> <p>First you need to determine the uid of the runner on the host using following command.</p> <div class=highlight><pre><span></span><code># id runner
uid=1000(runner) gid=1001(runner) groups=1001(runner),999(docker)
</code></pre></div> <p>1000 is the uid of user runner and 1001 is the gid of group runner.</p> <p>Edit file seatable_python_runner_settings.py.</p> <div class=highlight><pre><span></span><code><span class=nb>cd</span><span class=w> </span>/opt/seatable-python-runner/conf
nano<span class=w> </span>seatable_python_runner_settings.py
</code></pre></div> <p>Add configurations as follows:</p> <div class=highlight><pre><span></span><code><span class=n>UID</span> <span class=o>=</span> <span class=s1>&#39;1000&#39;</span>
<span class=n>GID</span> <span class=o>=</span> <span class=s1>&#39;1001&#39;</span>
</code></pre></div> <p>Save it and quit.</p> <p>All completed and restart Python Runner Package.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">October 20, 2023</span> </span> </aside> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../../Enterprise-Edition/Deploy%20SeaTable-EE%20with%20Docker/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Enterprise Edition"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Enterprise Edition </div> </div> </a> <a href=../Update%20SeaTable%20Python%20Runner/ class="md-footer__link md-footer__link--next" aria-label="Next: Upgrading"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Upgrading </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2022 - 2023 SeaTable GmbH </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/seatable/ target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> <a href=https://hub.docker.com/r/seatable/seatable-enterprise target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg> </a> <a href=https://www.linkedin.com/company/seatable/ target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.footer", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.indexes", "search.highlight", "search.share", "search.suggest", "toc.follow", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.d7c377c4.min.js></script> </body> </html>